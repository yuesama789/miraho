{"ast":null,"code":"var _jsxFileName = \"/Users/mira.ho/Documents/privateRepo/2025-miraho/src/context/modalContext.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useCallback, useContext, useEffect, useMemo, useRef, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ModalContext = /*#__PURE__*/createContext(undefined);\nfunction makeId() {\n  return `${Date.now().toString(36)}-${Math.random().toString(36).slice(2, 9)}`;\n}\nexport const ModalProvider = ({\n  children\n}) => {\n  _s();\n  const [modals, setModals] = useState([]);\n  const modalsRef = useRef(modals);\n  modalsRef.current = modals;\n  const openModal = useCallback((content, props) => {\n    const id = makeId();\n    const instance = {\n      id,\n      content,\n      props\n    };\n    setModals(prev => [...prev, instance]);\n    return id;\n  }, []);\n  const closeModal = useCallback(id => {\n    setModals(prev => {\n      if (!id) {\n        // close top\n        return prev.slice(0, -1);\n      }\n      return prev.filter(m => m.id !== id);\n    });\n  }, []);\n  const closeAll = useCallback(() => setModals(() => []), []);\n  const replaceTop = useCallback((content, props) => {\n    const top = modalsRef.current[modalsRef.current.length - 1];\n    if (!top) return null;\n    const id = makeId();\n    setModals(prev => [...prev.slice(0, -1), {\n      id,\n      content,\n      props\n    }]);\n    return id;\n  }, []);\n\n  // prevent background scroll when any modal is open\n  useEffect(() => {\n    if (modals.length > 0) {\n      const prev = document.body.style.overflow;\n      document.body.style.overflow = \"hidden\";\n      return () => {\n        document.body.style.overflow = prev || \"\";\n      };\n    }\n    return;\n  }, [modals.length]);\n\n  // close top modal on Escape\n  useEffect(() => {\n    const onKey = e => {\n      if (e.key === \"Escape\" && modalsRef.current.length > 0) {\n        // close top\n        const top = modalsRef.current[modalsRef.current.length - 1];\n        if (top) {\n          setModals(prev => prev.slice(0, -1));\n        }\n      }\n    };\n    window.addEventListener(\"keydown\", onKey);\n    return () => window.removeEventListener(\"keydown\", onKey);\n  }, []);\n  const value = useMemo(() => ({\n    modals,\n    openModal,\n    closeModal,\n    closeAll,\n    replaceTop\n  }), [modals, openModal, closeModal, closeAll, replaceTop]);\n  return /*#__PURE__*/_jsxDEV(ModalContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 8\n  }, this);\n};\n_s(ModalProvider, \"qXxftbsUpklRfMvipCP0JZc4Rrc=\");\n_c = ModalProvider;\nexport function useModal() {\n  _s2();\n  const ctx = useContext(ModalContext);\n  if (!ctx) {\n    throw new Error(\"useModal must be used within a ModalProvider\");\n  }\n  return ctx;\n}\n\n/*\nExample rendering helper (optional):\nConsume modals and render them wherever you keep your modal root.\nA simple pattern: put <ModalHost /> inside ModalProvider near the app root,\nand render each modal instance's content inside it.\n\nexport const ModalHost: React.FC = () => {\nconst { modals, closeModal } = useModal();\nreturn (\n    <>\n        {modals.map((m) => (\n            <YourModalShell key={m.id} onClose={() => closeModal(m.id)} {...m.props}>\n                {typeof m.content === \"function\" ? m.content() : m.content}\n            </YourModalShell>\n        ))}\n    </>\n);\n};\n*/\n_s2(useModal, \"/dMy7t63NXD4eYACoT93CePwGrg=\");\nvar _c;\n$RefreshReg$(_c, \"ModalProvider\");","map":{"version":3,"names":["React","createContext","useCallback","useContext","useEffect","useMemo","useRef","useState","jsxDEV","_jsxDEV","ModalContext","undefined","makeId","Date","now","toString","Math","random","slice","ModalProvider","children","_s","modals","setModals","modalsRef","current","openModal","content","props","id","instance","prev","closeModal","filter","m","closeAll","replaceTop","top","length","document","body","style","overflow","onKey","e","key","window","addEventListener","removeEventListener","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","useModal","_s2","ctx","Error","$RefreshReg$"],"sources":["/Users/mira.ho/Documents/privateRepo/2025-miraho/src/context/modalContext.tsx"],"sourcesContent":["import React, {\n\ncreateContext,\nuseCallback,\nuseContext,\nuseEffect,\nuseMemo,\nuseRef,\nuseState,\nReactNode,\n} from \"react\";\n\ntype ModalContent = ReactNode | (() => ReactNode);\n\ntype ModalInstance = {\nid: string;\ncontent: ModalContent;\nprops?: Record<string, any>;\n};\n\ntype ModalContextValue = {\nmodals: ModalInstance[];\nopenModal: (content: ModalContent, props?: Record<string, any>) => string;\ncloseModal: (id?: string) => void;\ncloseAll: () => void;\nreplaceTop: (content: ModalContent, props?: Record<string, any>) => string | null;\n};\n\nconst ModalContext = createContext<ModalContextValue | undefined>(undefined);\n\nfunction makeId() {\nreturn `${Date.now().toString(36)}-${Math.random().toString(36).slice(2, 9)}`;\n}\n\nexport const ModalProvider: React.FC<{ children?: ReactNode }> = ({ children }) => {\nconst [modals, setModals] = useState<ModalInstance[]>([]);\nconst modalsRef = useRef(modals);\nmodalsRef.current = modals;\n\nconst openModal = useCallback((content: ModalContent, props?: Record<string, any>) => {\n    const id = makeId();\n    const instance: ModalInstance = { id, content, props };\n    setModals((prev) => [...prev, instance]);\n    return id;\n}, []);\n\nconst closeModal = useCallback((id?: string) => {\n    setModals((prev) => {\n        if (!id) {\n            // close top\n            return prev.slice(0, -1);\n        }\n        return prev.filter((m) => m.id !== id);\n    });\n}, []);\n\nconst closeAll = useCallback(() => setModals(() => []), []);\n\nconst replaceTop = useCallback((content: ModalContent, props?: Record<string, any>) => {\n    const top = modalsRef.current[modalsRef.current.length - 1];\n    if (!top) return null;\n    const id = makeId();\n    setModals((prev) => [...prev.slice(0, -1), { id, content, props }]);\n    return id;\n}, []);\n\n// prevent background scroll when any modal is open\nuseEffect(() => {\n    if (modals.length > 0) {\n        const prev = document.body.style.overflow;\n        document.body.style.overflow = \"hidden\";\n        return () => {\n            document.body.style.overflow = prev || \"\";\n        };\n    }\n    return;\n}, [modals.length]);\n\n// close top modal on Escape\nuseEffect(() => {\n    const onKey = (e: KeyboardEvent) => {\n        if (e.key === \"Escape\" && modalsRef.current.length > 0) {\n            // close top\n            const top = modalsRef.current[modalsRef.current.length - 1];\n            if (top) {\n                setModals((prev) => prev.slice(0, -1));\n            }\n        }\n    };\n    window.addEventListener(\"keydown\", onKey);\n    return () => window.removeEventListener(\"keydown\", onKey);\n}, []);\n\nconst value = useMemo(\n    () => ({ modals, openModal, closeModal, closeAll, replaceTop }),\n    [modals, openModal, closeModal, closeAll, replaceTop]\n);\n\nreturn <ModalContext.Provider value={value}>{children}</ModalContext.Provider>;\n};\n\nexport function useModal() {\nconst ctx = useContext(ModalContext);\nif (!ctx) {\n    throw new Error(\"useModal must be used within a ModalProvider\");\n}\nreturn ctx;\n}\n\n/*\nExample rendering helper (optional):\nConsume modals and render them wherever you keep your modal root.\nA simple pattern: put <ModalHost /> inside ModalProvider near the app root,\nand render each modal instance's content inside it.\n\nexport const ModalHost: React.FC = () => {\nconst { modals, closeModal } = useModal();\nreturn (\n    <>\n        {modals.map((m) => (\n            <YourModalShell key={m.id} onClose={() => closeModal(m.id)} {...m.props}>\n                {typeof m.content === \"function\" ? m.content() : m.content}\n            </YourModalShell>\n        ))}\n    </>\n);\n};\n*/"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}